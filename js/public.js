$(function(){var t={$el:$("#load"),init:function(){$.get("api_project.json?t="+(new Date).getTime()).done(t.render).fail(function(){t.render({name:"API 文件",description:"",version:"0.0.0"})})},render:function(e){$("title").text(e.name),t.$el.append($("<div />").append($("<h1 />").text(e.name)).append($("<p />").text(e.description)).append($("<div />").append($("<i />")).append($("<i />")).append($("<i />"))).append($("<span />").text("版本：v"+e.version)))},hide:function(e){t.$el&&(t.$el.addClass("hide"),setTimeout(function(){t.$el.remove(),t.$el=null,e&&e()},375))}},e={$el:$("#main"),$tabs:null,$panels:null,$format:null,init:function(){var t=$("<div />");e.$el.empty().append(t),e.$el=t},render:function(t){e.$el.empty();var a={name:"",title:"",description:"",permission:[]};for(var n in a)"undefined"==typeof t[n]&&(t[n]=a[n]);var p=$("<header />").append($("<h1 />").attr("data-title",t.name).text(t.title)).append($("<section />").html(t.description)),i=$("<div />").addClass("important").append(t.permission.map(function(t){return $("<div />").append($("<span />").text(t.name)).append($("<div />").text(t.title)).append($(t.description))})),d=$("<div />").addClass("url").attr("data-type",t.type).append($("<pre />").text(t.url)),r={header:{title:"Header",d4:"Header"},parameter:{title:"參數",d4:"Parameter"},success:{title:"成功",d4:"Success 200"},error:{title:"錯誤",d4:"Error 4xx"}};e.$tabs=[],e.$panels=[];for(var l in r)"undefined"!=typeof t[l]&&(e.$tabs.push(r[l].title),e.$panels.push({d4:r[l].d4,fields:"undefined"==typeof t[l].fields?{}:t[l].fields,examples:"undefined"==typeof t[l].examples?[]:t[l].examples}));e.$tabs=$(e.$tabs.map(function(t){return $("<a />").text(t).click(function(){e.$format.attr("data-i",$(this).index()+1)})})).map($.fn.toArray),e.$panels=$(e.$panels.map(function(t){var e=$("<div />"),a=[];for(var n in t.fields)a.push($.extend(t.fields[n],{title:t.d4==n?"":n}));return a.sort(function(t,e){return t.title>e.title}),e.append(a.map(function(t){var e=$("<div />").addClass("table").append($("<table />").append($("<thead />").append($("<tr />").append($("<th />").addClass("center").addClass("is-need").text("必須")).append($("<th />").addClass("key").text("Key")).append($("<th />").addClass("type").text("類型")).append($("<th />").addClass("desc").text("敘述")))).append($("<tbody />").append(t.map(function(t){return $("<tr />").append($("<td />").append($("<span />").addClass(t.optional?"maybe":"need"))).append($("<td />").text(t.field)).append($("<td />").text(t.type)).append($("<td />").html(t.description))}))));return t.title.length?$("<h3 />").text(t.title).add(e):e})),e.append(t.examples.map(function(e){var a=$("<pre />").addClass("prettyprint").addClass("language-"+e.type).addClass("sample").text(e.content);return t.examples.length>1?$("<h3 />").text(e.title).add(a):a})),e})).map($.fn.toArray),e.$format=$("<div />").addClass("format").append($("<div />").addClass("tabs").append(e.$tabs)).append($("<div />").addClass("panels").append(e.$panels)),e.$tabs.first().click(),e.$el.append(p).append(i).append(d).append(e.$format),PR.prettyPrint()}},a={$el:$("#menu"),$search:null,$apis:null,$links:null,apis:null,init:function(){a.$el.empty(),a.$search=$("<form />").attr("id","search").append($("<input />").attr("placeholder","你想找什麼？").prop("required",!0).keyup(a.filter)).submit(function(){return!1}),a.$apis=$("<div />").attr("id","apis"),a.$el.append(a.$search),a.$el.append(a.$apis),a.$el.append($("<footer />").attr("id","footer").text("後台版型設計 by").append($("<a />").attr("href","https://www.ioa.tw/f=apidoc").attr("target","_blank").text("OA Wu")).append("，程式碼：").append($("<a />").attr("href","https://github.com/comdan66/OA-apiDoc-Template.git").attr("target","_blank").text("GitHub"))),null===a.apis?$.get("api_data.json?t="+(new Date).getTime()).done(function(t){a.apis=t,a.filter()}).fail(function(){a.apis=[],a.filter()}):a.filter()},filter:function(n){n="undefined"==typeof n?"":n,n="string"==typeof n?n.trim():n,n="object"==typeof n?$(this).val().trim():n,a.$apis.empty();var p=a.apis.filter(function(t){var e=new RegExp(n,"gi");return n.length?t.type.match(e)||t.url.match(e)||t.title.match(e)||t.group.match(e):t}),i={};p.forEach(function(t){"undefined"==typeof t.group&&(t.group=""),"undefined"==typeof i[t.group]&&(i[t.group]=[]),i[t.group].push(t)}),a.$links=[];for(var d in i){var r=i[d].map(function(t){return $("<a />").attr("data-type",t.type).attr("data-url",t.url).text(t.title).data("obj",t).click(function(){a.$links.removeClass("active"),$(this).addClass("active"),e.render($(this).data("obj"))})});a.$apis.append($("<div />").attr("data-title",d).attr("data-cnt",i[d].length).append(r)),a.$links.push(r)}console.error(),a.$links=$(a.$links.length?a.$links.reduce(function(t,e){return t.concat(e)}):[]).map($.fn.toArray),t.hide(function(){a.$links.length?a.$links.first().click():(a.$apis.attr("data-tip","找不到任何 API"),e.$el.attr("data-tip","找不到任何 API 資訊"))})}};t.init(),e.init(),a.init()});